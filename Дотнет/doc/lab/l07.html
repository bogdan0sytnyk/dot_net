<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Transitional//EN">
<HTML>
<HEAD>
   <meta http-equiv="Content-Type" content="text/html; charset=koi8-r">
   <meta name="Author" content="Alexander S. Derevjanko">
   <meta name="Generator" content="Far Editor">
   <meta name="Description" content="Data structures">
   <meta name="Owner" content="derev@insart.kharkov.ua">
   <meta name="Keywords" content="программирование, C">

<title>Основы программирования. Лабораторные работы </title>
<!--                                                                   -->
<!-- (C) Owner: Alexander S. Derevjanko -->
<!-- (C) ХГПУ. Каф.Информатики и интеллектуальной собственности, 2000. -->

</head>

<body background=../../iip_1.jpg>
<p>
<table cellpadding=10>
<tr><td><a href=../../index.html>Каталог</a></td><td><a href=../index.html>Индекс раздела</a></td><td></tr>
</table>
<table cellpadding=10>
<tr><td><a href=l06.html>Назад</a></td><td><a href=index.html>Оглавление</a></td><td><a href=l08.html>Вперед</a></td></tr>
</table>
</p>
<hr>

<h2 align=center>Операторы цикла в языке С</h2>

<h3 align=center>1. Цель работы</h3>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Целью лабораторной работы является получение практических навыков в работе с операторами цикла языка C.

<h3 align=center>2. Темы для предварительной проработки </h3>
<p><ul>
<li>Операторы цикла языка C. Вложенные циклы.
<li>Условный оператор языка C.
</ul>

<h3 align=center>3. Задание для выполнения</h3>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Для функции <b><i>Y = f(X)</i></b>, график которой приведен в Вашем индивидуальном задании, вывести на экран значения <b><i>Y</i></b> для <b><i>Х = 0, 0.25, 0.5, ... 19.75</i></b>. Необязательное для выполнения дополнительное требование - получить на экране график функции средствами текстового режима. 

<h3 align=center>4. Варианты индивидуальных заданий</h3>
<p><table align=center>
<tr><td>&nbsp;<a href=v07_01.html>1</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;<a href=v07_02.html>2</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;<a href=v07_03.html>3</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;<a href=v07_04.html>4</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;<a href=v07_05.html>5</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;<a href=v07_06.html>6</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;<a href=v07_07.html>7</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;<a href=v07_08.html>8</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;<a href=v07_09.html>9</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_10.html>10</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><a href=v07_11.html>11</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_12.html>12</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_13.html>13</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_14.html>14</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_15.html>15</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_16.html>16</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_17.html>17</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_18.html>18</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_19.html>19</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_20.html>20</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><a href=v07_21.html>21</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_22.html>22</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_23.html>23</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_24.html>24</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_25.html>25</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_26.html>26</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_27.html>27</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_28.html>28</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_29.html>29</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td><a href=v07_30.html>30</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
</table>
</p>

<h3 align=center>5. Пример решения задачи (вариант 30) </h3>

<h4 align=center>5.1. Разработка алгоритма решения.</h4>

<p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.1.1. Общий метод решения</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Из приведенного в индивидуальном задании графика функции видно, что функция является периодической, с периодом 4. В заданный интервал вкладываются 5 периодов функции. Так что, программа может содержать в себе цикл, в котором 5 раз будут выполняться одни и те же вычисления. В каждой итерации этого цикла должны перебираться значения <b><i>x</i></b> от 0 до 3.75 с шагом 0.25, т.е., должен быть вложенный цикл. В каждой итерации вложенного цикла вычисляется значение <b><i>y</i></b> для текущего <b><i>x</i></b> и выводятся результаты. 
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Анализ приведенного графика показывает, что каждый период его состоит из трех частей: на отрезке <b><i>0&lt;=x&lt;=1</i></b> график является прямой, на отрезке <b><i>1&lt;=x&lt;=3</i></b> - дугой, а на отрезке <b><i>3&lt;=x&lt;=4</i></b> - другой прямой. Следовательно, во вложенном цикле должно быть разветвление, в котором определяется текущее значение <b><i>x</i></b> и обеспечиваются вычисления для первого, второго или третьего случая. </p>

<p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.1.2. Вычисление функции на отрезке 0 - 1</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;На этом отрезке функция является функцией прямой. Формула прямой: <b><i>y=ax+b</i></b>. Для этого случая <b><i>a=2, b=-1</i></b>. Итак, окончательная формула для отрезка <b><i>0<=x<=1</i></b> такая:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><i>y=2x-1</i></b>

<p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.1.3. Вычисление функции на отрезке 1 - 3</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;На этом отрезке функция является частью окружности. Формула окружности: <b><i>(x-x0)<sup>2</sup>+(y-y0)<sup>2</sup>=R<sup>2</sup></i></b>, где <b><i>(x0, y0)</i></b> - координаты центра окружности, а <b><i>R</i></b> - радиус. Отсюда <b><i>y</i></b> можно определить как: <img src=l07_a0.gif>. В нашем случае <b><i>R=1</i></b>, а координаты центра - <b><i>(2, 1)</i></b>. Извлечение квадратного корня дает два значения - положительное и отрицательное, в нашем случае используется только нижняя полуокружность, так что следует брать только отрицательное значение. Окончательная формула для отрезка <b><i>1&lt;=x&lt;=3</i></b> такая:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><i>y=2-((1-(x-2)<sup>2</sup>) </i></b>

<p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.1.4. Вычисление функции на отрезке 3 - 4</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Для прямой на этом отрезке <b><i>a=-2, b=7</i></b>, окончательная формула:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><i>y=7-2x</i></b>

<p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.1.5. Алгоритм вывода результатов в псевдографической форме</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;В каждой итерации внутреннего цикла мы получает одну ординату графика. Следовательно, для представления результата в псевдографической форме будет удобно развернуть график на 90о и в каждой строке экрана отображать значения <b><i>x</i></b>, <b><i>y</i></b> и символ, который изображает одну точку графика, смещение этого символа в строке будет пропорционально значению ординаты. Для отображения этого символа с необходимым смещением нужно преобразовать ординату в целое число (с масштабированием к размеру строки), это число будет количеством пробелов, которое нужно вывести в строке перед символом-"точкой".
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;В каждый период функции вкладывается 16 итераций внутреннего цикла, т.е. на экран будет выведено 16 строк на период. Целесообразно после вывода каждого периоду (который целиком помещается на экране) делать остановку в программе до команды оператора на продолжение.

<p><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.1.6. Схема алгоритма</b>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Схема алгоритма показана на рисунке ниже.
<p><table align=center border>
<tr><td><img src=l07_e62.gif></td></tr>
</table>

<h4 align=center>5.2. Определение переменных программы</h4>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Для реализации алгоритма понадобятся такие переменные:
<p><b><i>n</i></b> - параметр внешнего цикла, для него достаточно короткого целого значения:
<pre>
    short n;
</pre>
<p><b><i>x</i></b> - параметр внутреннего цикла и одновременно - текущее значение абсциссы графика. Хотя его точность невелика, объявим его как <b><i>double</i></b>, в соответствии с общим стилем программирования на С.
<pre>
    double x;
</pre>
<p><b><i>y</i></b> - текущее значение ординаты графика:
<pre>
    double y;
</pre>
<p><b><i>h</i></b> - смещение в строке символа, который означает точку графика. Поскольку смещение не может превышать 80 (размер строки экрана), для этой переменной достаточно будет короткого целого:
<pre>
    short h;
</pre>

<h4 align=center>5.3. Разработка текста программы</h4>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Начинаем разработку текста программы с заголовка главной функции:
<pre>
    int main(void)
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Далее открывается тело функции, и в него включаются объявления переменных (см. п.5.2). 
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Кодовая часть программы начинается в  соответствии со схемой алгоритма (блок 2) оператором-заголовком внешнего цикла. Это типичный цикл со счетчиком, он реализуется оператором:
<pre>
    for (n=0; n&lt;5; n++) {
</pre>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Так как в теле цикла содержится несколько отдельных действий, значит, будет несколько операторов, тело цикла берется в операторные скобки.
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;В теле цикла прежде всего печатается заголовок таблицы (блок 3) операторами: 
<pre>
    printf("|     X      |      Y     |\n");
    printf("|------------|------------|\n");
</pre>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;После этого открываем внутренний цикл (блок 4). Параметр этого цикла - значение абсциссы <b><i>x</i></b> - принимает значения от 0 до 3.75 с шагом 0.25: 
<pre>
    for (x=0; x&lt;4; x+=0.25) {
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Блок 5 схемы алгоритма (проверка попадания на первый отрезок) реализуется условным оператором:
<pre>
    if (x&lt;1)
</pre>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;В случае выполнения этого условия, значение абсциссы вычисляется (блок 7) по уравнению для первой прямой:
<pre>
    y=2*x-1;
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Если же предыдущее условие не выполняется, блок 6 схемы алгоритма (проверка попадания на второй отрезок) реализуется условным оператором:
<pre>
    else if (x&lt;3)
</pre>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;В случае выполнения этого условия, значение абсциссы вычисляется (блок 8) по уравнению для полуокружности:
<pre>
    y=1-sqrt(1-(x-2)*(x-2));
</pre>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;В этом выражении для возведения в степень 2 применяется умножение. Функция <b><i>sqrt()</i></b> описана в файле <b><i>math.h</i></b>, так что включаем этот файл в начало программы:
<pre>
    #include &lt;math.h&gt;
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Если же и это условие не выполняется, то мы имеем попадание на третий отрезок, и значение абсциссы вычисляется (блок 9) по уравнению для второй прямой:
<pre>
    else y=7-2*x;
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Во внутреннем цикле мы выполняем вычисления для одного периода функции, но внешний цикл выполняется у нас 5 раз. Реальное значение абсциссы с учетом внешнего цикла составляет <b><i>x+4n</i></b>. Теперь, когда мы имеем абсциссу и ординату графика, можем выводить строку выходных данных (блок 10). Сперва выводим строку таблицы:
<pre>
    printf("| %5.2lf | %10.7lf | ",x+n*4,y);
</pre>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Спецификации формата подобраны таким образом, чтобы значения <b><i>x</i></b> и <b><i>y</i></b> выводились в два столбца. Числовые параметры спецификации <b><i>%lf</i></b>  должны обеспечить представление значений <b><i>x</i></b> и <b><i>y</i></b> с достаточной точностью. Функция <b><i>printf()</i></b> описана в файле <b><i>stdio.h</i></b>, поэтому мы включаем этот файл в начало программы:
<pre>
    #include &lt;stdio.h&gt;
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Следующий шаг - вывод в той же строку точки графика. После вывода строки таблицы в строке экрана осталось 57 свободных знакомест. На этом пространстве нам нужно показать значения <b><i>y</i></b> от -1 до +1. Если мы возьмем коэффициент масштабирования 10, то амплитуда графика составит 20 знакомест - достаточно для наглядного его представления. Масштабирование значения ординаты выполняется оператором:
<pre>
    h=(y+1)*10;
</pre>
<br>Выбранное значение коэффициента масштабирования - 10 - может быть изменено при отладке).
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;При выполнении последнего оператора мы теряем дробную часть. Поскольку среди библиотечных функций языка C нет функции точного округления, мы выполняем такое округление сами:
<pre>
    if (y-1-h*10&gt;0.5) h++;
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Далее в строку экрана выводится (блоки 12-13) требуемое количество пробелов. В следующем цикле полученное ранее значение <b><i>h</i></b> работает как счетчик на вычитание.
<pre>
    for (; h>0; h--) printf(" ");
</pre>
а потом выводится символ '*' и происходит переход на новую строку экрана:
<pre>
    printf("*\n");
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;На этом заканчивается внутренний цикл.
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;После выхода из внутреннего цикла мы выводим сообщение оператору:
<pre>
    printf("Нажмите клавишу Enter...");
</pre>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;И ждем нажатия клавЁши:
<pre>
    getchar();
</pre>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;На этом закрывается внешний цикл, а потом и тело функции <b><i>main()</i></b>.
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Полный текст программы приведен ниже.

<pre>
/****************************************************/
/*              Лабораторная работа ╧7              */
/*    Вычисление значений периодической функции     */
/*         Пример выполнения. Вариант ╧30.          */
/****************************************************/
#include &lt;stdio.h&gt;#include &lt;math.h&gt;
int main(void) {
 short n;        /* параметр внешнего цикла */
 double x, y;    /* абсцисса и ордината графика */
 short h;        /* позиция точки на экране */
    /* внешний цикл - для 5 периодов */
    for (n=0; n&lt;5; n++) {
      /* вывод заголовка таблицы */
      printf("|   x   |      y     |\n");
      printf("|-------|------------|\n");
      /* внутренний цикл для одного периода */
      for (x=0; x&lt;4; x+=0.25) {
        /* 1-й отрезок */
        if (x&lt;1) y=2*x-1;
        /* 2-й отрезок */
        else if (x&lt;3) y=1-sqrt(1-(x-2)*(x-2));
        /* 3-й отрезок */
        else y=7-2*x;
        /* вывод строки таблицы */
        printf("| %5.2lf | %10.7lf |",x+n*4,y);
        /* определение позиции точки */
        h=(y+1)*10;
        if (y-1-h*10&gt;0.5) h++;
        /* вывод точки графика */
        for (; h&gt;0; h--) printf(" ");
        printf("*\n");
        }  /* конец внутреннего цикла */
      /* пауза до команды оператора */
      printf("Нажмите клавишу Enter...");
      getchar();
      }  /* конец внешнего цикла */
   return 0;
} /* конец программы */
</pre>

<h4 align=center>5.4. Отладка программы</h4>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Форма вывода в приведенной программе такая, что нет настоятельной необходимости применять при отладке пошаговый режим. Однако логический план отладки следует составить поэтапным:<ul>
<li>убедиться в правильной организации внешнего и внутреннего циклов;
<li>убедиться в правильной работе цепочки условий, которые определяют отрезок;
<li>убедиться в правильном вычислении значения ординаты на первом отрезке (только по числовым значениям);
<li>на примере первого отрезка убедиться в правильном выводе графика;
<li>убедиться в правильном вычислении значения ординаты на втором отрезке;
<li>убедиться в правильном вычислении значения ординаты на третьем отрезке.
</ul>

<h4 align=center>5.5. Результаты работы программы</h4>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Мы приводим только часть результатов, полученных на экране при работе программы (для одного периода функции). Остальные результаты повторяют приведенные с другими значениями <b><i>x</i></b>. 
<pre>
|   x   |      y     |
|-------|------------|
|  0.00 | -1.0000000 |*
|  0.25 | -0.5000000 |     *
|  0.50 |  0.0000000 |          *
|  0.75 |  0.5000000 |               *
|  1.00 |  1.0000000 |                    *
|  1.25 |  0.3385622 |             *
|  1.50 |  0.1339746 |           *
|  1.75 |  0.0317542 |          *
|  2.00 |  0.0000000 |          *
|  2.25 |  0.0317542 |          *
|  2.50 |  0.1339746 |           *
|  2.75 |  0.3385622 |             *
|  3.00 |  1.0000000 |                    *
|  3.25 |  0.5000000 |               *
|  3.50 |  0.0000000 |          *
|  3.75 | -0.5000000 |     *
Нажмите клавишу Enter...
. . .
</pre>

<h4 align=center>5.6. Выводы</h4>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;При выполнении лабораторной работы изучены вопросы:<ul>
<li>составления циклических алгоритмов с вложенными циклами и разветвлениями в теле цикла;
<li>организации наглядного вывода информации в текстовом режиме;
<li>программной реализации циклических алгоритмов;
<li>отладки программ, содержащих циклические алгоритмы.
</ul>

<p><hr>
<table cellpadding=10>
<tr><td><a href=../../index.html>Каталог</a></td><td><a href=../index.html>Индекс раздела</a></td><td></tr>
</table>
<table cellpadding=10>
<tr><td><a href=l06.html>Назад</a></td><td><a href=index.html>Оглавление</a></td><td><a href=l08.html>Вперед</a></td></tr>
</table>
</p>
<hr>
</body>
</html>
